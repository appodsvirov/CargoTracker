@using Microsoft.JSInterop
@inject IJSRuntime JS
@inject Radzen.NotificationService Notifications

<RadzenButton Click="CopyAsync" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Small">
    @if (ChildContent is not null)
    {
        @ChildContent
    }
    else if (!string.IsNullOrWhiteSpace(ButtonText))
    {
        @ButtonText
    }
    else
    {
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M16 1H4c-1.1 0-2 .9-2 2v12h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
        </svg>
    }
</RadzenButton>

@code {
    [Parameter, EditorRequired] public string TextToCopy { get; set; } = string.Empty;
    [Parameter] public string? ButtonText { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private async Task CopyAsync()
    {
        try
        {
            await JS.InvokeVoidAsync("cargoTrackerCopyToClipboard", TextToCopy);
            Notifications.Notify(Radzen.NotificationSeverity.Success, "Copied", "Value copied to clipboard");
        }
        catch (Exception ex)
        {
            Notifications.Notify(Radzen.NotificationSeverity.Error, "Copy failed", ex.Message);
        }
    }
}
